(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&p(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const y="@@todo-app:tasks";function d(e){try{localStorage.setItem(y,JSON.stringify(e))}catch(t){console.error("Erro ao salvar tarefas:",t)}}function g(){const e=localStorage.getItem(y);if(!e||e==="undefined"||e==="null")return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(t){return console.error("Erro ao fazer parse das tarefas:",t),[]}}const o={features:{useExternalApi:!0,helpButton:!0,advancedEdit:!0},app:{version:"0.7.0"},branding:{roundness:"8px",primaryColor:"#006aff",primaryHover:"#0056b3",successColor:"#28a745",secondaryColor:"#00ff48",bgColor:"#f4f7f6",cardBg:"#ffffff",textColor:"#333",textLight:"#777",fontFamilyAlt:"'Segoe UI', Tahoma, sans-serif",shadowSm:"0 2px 5px rgba(0,0,0,0.05)",shadowMd:"0 4px 10px rgba(0,0,0,0.1)",fontFamily:"Roboto, sans-serif"}};function i(e){return{id:e.id,text:e.todo||e.title||"",completed:e.completed}}class h{constructor(){this.apiUrl="https://dummyjson.com/todos",this.mockTasks=this.generateMockData()}generateMockData(){return[{id:1,todo:"üéØ Aprender JavaScript",completed:!1},{id:2,todo:"üìö Estudar Services em JS",completed:!1},{id:3,todo:"‚úÖ Implementar API Service",completed:!1},{id:4,todo:"üß™ Escrever Testes Unit√°rios",completed:!1}]}async fetchMockTasks(){return console.log("üì¶ ApiService: Retornando dados MOCK"),new Promise(t=>{setTimeout(()=>{t(this.mockTasks.map(i))},500)})}async fetchRemoteTasks(){console.log("üåê ApiService: Buscando dados da API externa");try{const t=await fetch(this.apiUrl);if(!t.ok)throw new Error(`Erro HTTP: ${t.status}`);const r=await t.json();return Array.isArray(r.tasks)?r.tasks.slice(0,4).map(i):(console.error('‚ùå ApiService: Resposta da API n√£o cont√©m array "tasks" v√°lido.'),this.mockTasks.map(i))}catch(t){return console.error("‚ùå ApiService: Erro ao buscar dados remotos",t),this.mockTasks.map(i)}}async fetchTasks(){return console.log(`‚öôÔ∏è  ApiService: useExternalApi = ${o.features.useExternalApi}`),this.fetchRemoteTasks()}}const b=new h,a=[];async function v(){const e=[];try{const t=await b.fetchTasks();e.push(...t.map(r=>({id:r.id,text:r.todo??r.title??"Tarefa sem descri√ß√£o",completed:r.completed})))}catch(t){console.error("Erro ao buscar tarefas da API externa:",t);const r=g();e.push(...r)}a.push(...e),d(a)}function T(e){if(!e||e.trim()==="")return;const t={id:Date.now(),text:e,completed:!1};return a.push(t),d(a),t}function k(e){const t=a.findIndex(r=>r.id===e);return t>-1?(a.splice(t,1),d(a),1):0}function A(e){const t=a.find(r=>r.id===e);return t?(t.completed=!t.completed,d(a),1):0}function E(e){const t=document.createElement("button");t.className="btn btn-help",t.innerText="Ajuda",t.style.marginBottom="10px",t.onclick=()=>{alert(`
        To-Do List v${o.app.version}
        Como usar:
        1. Digite sua tarefa no campo acima
        2. Clique em "Adicionar Tarefa"
        3. Marque tarefas como conclu√≠das clicando em "COMPLETAR"
        4. Delete tarefas com o bot√£o "REMOVER"
    `)},e.appendChild(t)}function S(e){const t=document.createElement("div");t.className="advanced-edit-panel",t.innerHTML=`
        <h3>Edi√ß√£o Avan√ßada</h3>
        <button class="btn" onclick="alert('Duplicar tarefa em desenvolvimento')">Duplicar Tarefa</button>
        <button class="btn" onclick="alert('Agendar tarefa em desenvolvimento')">Agendar</button>
    `,e.appendChild(t)}function x(){const e=document.documentElement;e.style.setProperty("--border-radius",o.branding.roundness),e.style.setProperty("--primary-color",o.branding.primaryColor),e.style.setProperty("--font-family",o.branding.fontFamily),e.style.setProperty("--primary-hover",o.branding.primaryHover),e.style.setProperty("--success-color",o.branding.successColor),e.style.setProperty("--secondary-color",o.branding.secondaryColor),e.style.setProperty("--bg-color",o.branding.bgColor),e.style.setProperty("--card-bg",o.branding.cardBg),e.style.setProperty("--text-color",o.branding.textColor),e.style.setProperty("--text-light",o.branding.textLight),e.style.setProperty("--font-family-alt",o.branding.fontFamilyAlt),e.style.setProperty("--shadow-sm",o.branding.shadowSm),e.style.setProperty("--shadow-md",o.branding.shadowMd)}const u=document.getElementById("taskInput"),P=document.getElementById("addTaskBtn"),m=document.getElementById("taskList"),f=document.getElementById("completedTaskList"),L=document.getElementById("header-actions"),C=document.getElementById("advanced-section");function I(){E(L),S(C),console.log("Features ativadas:",o.features)}function c(){m.innerHTML="",f.innerHTML="",a.forEach(e=>{const t=document.createElement("li");t.className="task-item flex-grid",t.style.borderRadius=o.branding.roundness,t.innerHTML=`
            <span class="task-text ${e.completed?"task-completed":""}">${e.text}</span>
            <div class="button-group">
                ${e.completed?"":`<button class="btn btn-complete task-btn" data-id="${e.id}">Completar</button>`}
                <button class="btn btn-delete task-btn" data-id="${e.id}">Remover</button>
            </div>
        `,e.completed?f.appendChild(t):m.appendChild(t)}),w()}function w(){document.querySelectorAll(".btn-delete").forEach(e=>{e.addEventListener("click",()=>{k(Number(e.dataset.id)),c()})}),document.querySelectorAll(".btn-complete").forEach(e=>{e.addEventListener("click",()=>{console.log("Enviando para API externa..."),A(Number(e.dataset.id)),c()})})}P.addEventListener("click",()=>{const e=u.value.trim();e!==""&&(T(e),u.value="",u.focus(),c())});async function B(){console.log(`Iniciando To-Do List v${o.app.version}`),await v(),x(),I(),c()}B();
